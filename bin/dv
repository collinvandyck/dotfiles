#!/usr/bin/env bash

set -e

window_name='.dotfiles'

idx=$(tmux list-windows -F "#{window_index}:#{window_name}" | grep .dotfiles | awk -F: '{print $1}')
if [ -n "$idx" ]; then
	tmux select-window -t $idx
else
	tmux new-window -n $window_name -c ~/.dotfiles nvim
fi

idx=$(tmux list-windows -F "#{window_index}:#{window_name}" | grep .dotfiles | awk -F: '{print $1}')
while [ $idx -gt 0 ]; do
	tmux swap-window -s $idx -t $((idx-1))
	idx=$((idx-1))
done

tmux select-window -t 0
