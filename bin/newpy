#!/usr/bin/env bash

set -euo pipefail

# https://realpython.com/python-typer-cli/

name=${1:-}
dir=~/code

usage() {
	echo "usage: $(basename "$0") [name]"
	exit 1
}

if [ -z "$name" ]; then
	name=wip
	dir=$(mktemp -d)
fi

cd "$dir"

if [ -d "$name" ]; then
	echo "error: $name already exists"
	exit 1
fi

mkdir "$name"
cd "$name"
python -m venv ./venv
source venv/bin/activate

cat <<eos > main.py
print("Hello world!")
eos

cat <<eos > .justfile
run:
	@python main.py
eos

nvim main.py
exec zsh
