#!/usr/bin/env bash
set -euo pipefail

# sets up the standard operating environment for claude.
# explicitly a bash script to avoid inheriting aliases for things like lsd.

# use bash for claude code sessions
export CLAUDE_CODE_SHELL=bash

claudes=(
	"$HOME/.claude/local/claude"
	"$HOME/.local/bin/claude"
)

find-claude() {
	for claude in "${claudes[@]}"; do
		[[ -f "$claude" ]] && CLAUDE="$claude"
	done
}

find-claude
[[ -z "${CLAUDE:-}" ]] && {
	echo "Installing claude..."
	curl -fsSL https://claude.ai/install.sh | bash
}

find-claude
${CLAUDE:?no claude found} "$@"
